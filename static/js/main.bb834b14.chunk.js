(this["webpackJsonpsound-chat"]=this["webpackJsonpsound-chat"]||[]).push([[0],{100:function(e,a,t){"use strict";t.r(a);var n=t(0),c=t.n(n),r=t(9),o=t.n(r),i=(t(79),t(43)),l=t(16),u=t(42),s=t.n(u);t(80),t(82);s.a.initializeApp({apiKey:"AIzaSyA_6SN910Ry8czAxRR2FgcCmB9t4u8GY30",authDomain:"sound-chat-5875a.firebaseapp.com",databaseURL:"https://sound-chat-5875a.firebaseio.com",projectId:"sound-chat-5875a",storageBucket:"sound-chat-5875a.appspot.com",messagingSenderId:"1052142353738",appId:"1:1052142353738:web:0231122eeccb95832315b3"});var m=s.a,d=t(133),f=t(147),p=t(138),g=t(101),v=t(139),h=t(140),b=t(141),E=t(142),y=c.a.createContext(void 0),j=function(){return c.a.useContext(y)},O=t(132),w=t(135),k=t(146);function x(e){var a=e.children,t=Object(O.a)();return c.a.createElement(d.a,{appear:!1,direction:"down",in:!t},a)}var S=Object(w.a)((function(e){return Object(k.a)({root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}})})),I=function(){var e=j(),a=S(),t=c.a.createElement(c.a.Fragment,null,c.a.createElement(f.a,{alt:(null===e||void 0===e?void 0:e.displayName)||void 0,src:(null===e||void 0===e?void 0:e.avatar)||void 0}),c.a.createElement(p.a,{edge:"end"},c.a.createElement(g.a,{variant:"contained",color:"primary",onClick:function(){!function(){var e=new m.auth.GoogleAuthProvider;m.auth().signInWithRedirect(e).then((function(e){console.log(e)})).catch((function(e){console.error(e)}))}()}},"Login")));return c.a.createElement(c.a.Fragment,null,c.a.createElement(v.a,null),c.a.createElement(x,null,c.a.createElement(h.a,{position:"static"},c.a.createElement(b.a,null,c.a.createElement(E.a,{variant:"h6",className:a.title},"Sound Chat"),t))))},N=t(59),A=t(143),C=t(61),T=t(60),P=t.n(T),F=t(89),R=t(90),L=t(91),M=t(92),B=t(93),G=t(94),z=t(95),W=t(96),Y={clap:"\u62cd\u624b",yeah:"\u30a4\u30a8\u30fc\u30a4",ou:"\u30aa\u30a5!",dora:"\u30c9\u30e9",listenToMe:"\u4ffa\u306e\u8a71\u3092\u805e\u3051",guts:"\u30ac\u30c3\u30c4\u3060\u305c",whatTime:"\u4eca\u4f55\u6642"},D={clap:F,yeah:L,ou:R,listenToMe:M,whatTime:B,dora:G,guts:z,zannen:W},J=function(e){var a=new RegExp(/^\[\[(\w+)\]\]$/),t=e.match(a);if(!t)return null;var n=t[1];return function(e){return-1!==Object.keys(D).findIndex((function(a){return a===e}))}(n)?n:null},U=function(e){var a=e.command,t=e.status,n=e.onFinishedPlaying,r=function(e){if(void 0===e)return null;var a=J(e);return a?D[a]:null}(a);return c.a.createElement(P.a,{url:r||"",playStatus:t||"PLAYING",onFinishedPlaying:n||function(){}})};function $(){var e=Object(N.a)(["\n  margin: 10px;\n"]);return $=function(){return e},e}var _=Object(w.a)((function(e){return Object(k.a)({small:{width:e.spacing(3),height:e.spacing(3)},large:{width:e.spacing(7),height:e.spacing(7)}})})),K=function(e,a){return e.name===a.displayName},V=function(e){var a=function(e){var a=J(e);return a?Y[a]:null}(e);return a?"\ud83c\udfb6 ".concat(a):e},q=function(e){var a=j(),t=_(),n=e.messageObject,r=n.key,o=n.image,i=n.message,l=n.name;return c.a.createElement(A.a,{container:!0,justify:a&&K(e.messageObject,a)?"flex-end":"flex-start",direction:"row",alignItems:"center"},c.a.createElement(f.a,{alt:l||void 0,src:o||void 0,className:t.small}),c.a.createElement(H,{key:r},V(i)))},H=C.a.span($()),Q=function(e){var a=e.messages;if(0===a.length)return c.a.createElement("div",null);var t=a.map((function(e){return c.a.createElement(q,{key:e.key,messageObject:e})}));return c.a.createElement("div",null,t)},X=(t(97),t(44)),Z=t(145),ee=t(65),ae=t.n(ee),te=function(e){m.database().ref("message").push(Object(X.a)(Object(X.a)({},e),{},{created:m.database.ServerValue.TIMESTAMP}))},ne=function(){var e=j(),a=c.a.useState(""),t=Object(l.a)(a,2),n=t[0],r=t[1];if(!e)return null;return c.a.createElement(c.a.Fragment,null,c.a.createElement("form",{autoComplete:"off"},c.a.createElement(Z.a,{value:n,onChange:function(e){r(e.target.value)},disabled:!e,placeholder:"type your message here",fullWidth:!0})),c.a.createElement(g.a,{variant:"contained",color:"primary",endIcon:c.a.createElement(ae.a,null,"send"),onClick:function(){te({message:n,name:e.displayName||void 0,image:e.avatar||void 0})}},"Send"))},ce=t(144),re=function(){var e=c.a.useState(void 0),a=Object(l.a)(e,2),t=a[0],n=a[1],r=c.a.useState(!1),o=Object(l.a)(r,2),i=o[0],u=o[1],s=c.a.useState(0),m=Object(l.a)(s,2),d=m[0],f=m[1],p=j();if(!p)return null;return c.a.createElement(c.a.Fragment,null,c.a.createElement(U,{command:t,status:i?"PLAYING":"STOPPED",onFinishedPlaying:function(){u(!1)}}),c.a.createElement(ce.a,{color:"primary","aria-label":"outlined primary button group"},Object.keys(Y).map((function(e){return a=e,t=Y[e],c.a.createElement(g.a,{key:t,onClick:function(){u(!1),te({message:"[[".concat(a,"]]"),name:p.displayName||void 0,image:p.avatar||void 0})},onMouseEnter:function(){window.clearTimeout(d);var e=window.setTimeout((function(){n("[[".concat(a,"]]")),u(!0),f(0)}),500);f(e)},onMouseLeave:function(){d>0&&(window.clearTimeout(d),f(0)),n(void 0),u(!1)}},t);var a,t}))))};var oe=function(){var e=Object(n.useState)(void 0),a=Object(l.a)(e,2),t=a[0],r=a[1],o=Object(n.useState)([]),u=Object(l.a)(o,2),s=u[0],d=u[1],f=Object(n.useState)(),p=Object(l.a)(f,2),g=p[0],v=p[1];return Object(n.useEffect)((function(){m.auth().onAuthStateChanged((function(e){console.warn(e),e&&r({email:e.email,avatar:e.photoURL,displayName:e.displayName})}))}),[]),Object(n.useEffect)((function(){if(t){var e=0;m.database().ref("message").limitToLast(10).once("value",(function(a){console.log("inside once callback with limited 10");var t=a.val();null!==t&&(console.log(t),Object.keys(t).forEach((function(a){var n=t[a],c={key:a,name:n.name,image:n.image,message:n.message,created:n.created};d((function(e){return[].concat(Object(i.a)(e),[c])})),e=null===e||e<c.created?c.created:e}))),a.ref.orderByChild("created").startAt(e+1).on("child_added",(function(e){var a=e.val(),t={key:e.key,name:a.name,image:a.image,message:a.message,created:a.created};d((function(e){return[].concat(Object(i.a)(e),[t])})),console.log(a.message),v(a.message)}))}))}}),[t]),c.a.createElement(y.Provider,{value:t},c.a.createElement("div",{className:"App"},c.a.createElement(I,null),t&&c.a.createElement(c.a.Fragment,null,c.a.createElement(Q,{messages:s}),c.a.createElement(re,null),c.a.createElement(ne,null),c.a.createElement(U,{command:g}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(oe,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},74:function(e,a,t){e.exports=t(100)},79:function(e,a,t){},89:function(e,a,t){e.exports=t.p+"static/media/\u62cd\u624b\u3068\u6b53\u58f0.dfc91a3d.mp3"},90:function(e,a,t){e.exports=t.p+"static/media/mens-ou1.325c5d7b.mp3"},91:function(e,a,t){e.exports=t.p+"static/media/\u30a4\u30a8\u30fc\u30a4.ba4350c3.mp3"},92:function(e,a,t){e.exports=t.p+"static/media/\u4ffa\u306e\u8a71\u3092\u805e\u3051.bcb20230.mp3"},93:function(e,a,t){e.exports=t.p+"static/media/\u3044\u307e\u4f55\u6642\uff1f.337a27c5.mp3"},94:function(e,a,t){e.exports=t.p+"static/media/\u30c8\u3099\u30e9.71d29c0d.mp3"},95:function(e,a,t){e.exports=t.p+"static/media/\u30ab\u3099\u30c3\u30c4\u305f\u3099\u305b\u3099.199d7110.mp3"},96:function(e,a,t){e.exports=t.p+"static/media/\u6b8b\u5ff5.6940c363.mp3"},97:function(e,a,t){}},[[74,1,2]]]);
//# sourceMappingURL=main.bb834b14.chunk.js.map